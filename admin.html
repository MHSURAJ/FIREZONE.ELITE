<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
  body { font-family: Arial; padding: 20px; background: #eef2f3; }
  h1, h2 { text-align: center; }
  input { margin: 5px; padding: 5px; }
  button { margin: 5px; padding: 5px 10px; }
  .tournament { background: #fff; padding: 10px; margin: 10px 0; border-radius: 5px; display: flex; justify-content: space-between; }
</style>
</head>
<body>

<h1>Admin Panel</h1>
<h2>Add Tournament</h2>
<input type="text" id="name" placeholder="Name">
<input type="text" id="date" placeholder="Date">
<input type="text" id="prize" placeholder="Prize">
<button id="add-tour">Add</button>

<h2>Existing Tournaments</h2>
<div id="tournament-list"></div>

<script>
const sheetAPI = 'YOUR_DEPLOYED_WEBAPP_URL'; // Apps Script Web App URL

async function loadTournaments(){
    const res = await fetch(sheetAPI);
    const data = await res.json();
    const container = document.getElementById('tournament-list');
    container.innerHTML = '';
    data.slice(1).forEach(row => {
        const div = document.createElement('div');
        div.className = 'tournament';
        div.innerHTML = `<span>${row[1]} - ${row[2]} - ${row[3]}</span>`;
        
        const delBtn = document.createElement('button');
        delBtn.textContent = 'Delete';
        delBtn.onclick = async () => {
            await fetch(sheetAPI + `?action=delete&id=${row[0]}`);
            loadTournaments();
        }

        div.appendChild(delBtn);
        container.appendChild(div);
    });
}

// Add tournament
document.getElementById('add-tour').addEventListener('click', async () => {
    const name = document.getElementById('name').value;
    const date = document.getElementById('date').value;
    const prize = document.getElementById('prize').value;
    if(!name || !date || !prize){ alert('Fill all fields'); return; }
    await fetch(sheetAPI + `?action=add&name=${encodeURIComponent(name)}&date=${encodeURIComponent(date)}&prize=${encodeURIComponent(prize)}`);
    document.getElementById('name').value='';
    document.getElementById('date').value='';
    document.getElementById('prize').value='';
    loadTournaments();
});

loadTournaments();
</script>

</body>
</html>
